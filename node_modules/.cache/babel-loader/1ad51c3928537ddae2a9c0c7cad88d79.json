{"ast":null,"code":"import _classCallCheck from \"/Users/chenyao/Documents/item/test/react-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenyao/Documents/item/test/react-admin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenyao/Documents/item/test/react-admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenyao/Documents/item/test/react-admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenyao/Documents/item/test/react-admin/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenyao/Documents/item/test/react-admin/src/pages/home.js\";\nimport React, { Component } from 'react';\nimport './home.css';\nimport { Menu, Icon, Button, Avatar, Tabs } from 'antd';\nimport RouterChild from \"../router/routerChild\";\nimport routerList from '../router/routerList';\nimport { getSessionStorage } from '../utils/storage';\nimport { Redirect } from 'react-router-dom';\nimport qs from 'qs';\nvar SubMenu = Menu.SubMenu;\nvar params = qs.parse(window.location.hash.split('?')[1]);\n\nvar Router =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Router, _Component);\n\n  function Router(props) {\n    var _this;\n\n    _classCallCheck(this, Router);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Router).call(this, props));\n\n    _this.toggleCollapsed = function () {\n      _this.setState({\n        collapsed: !_this.state.collapsed\n      });\n    };\n\n    _this.state = {\n      collapsed: false,\n      activeKey: '/home/order/order',\n      pane: [],\n      index: 1\n    };\n    return _this;\n  }\n\n  _createClass(Router, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {// setInterval(() => {\n      //     this.setState({\n      //         index: this.state.index ++\n      //     }, ()=> {\n      //         console.log(this.state.index)\n      //     },5000)\n      // })\n    }\n  }, {\n    key: \"setPane\",\n    value: function setPane(tabsItem, activeKey) {\n      this.state.pane.push(tabsItem);\n      this.setState({\n        activeKey: activeKey,\n        pane: this.state.pane\n      });\n    }\n  }, {\n    key: \"pushPath\",\n    value: function pushPath(v) {\n      var location = this.props.location;\n      if (v.path === location.pathname) return;\n      var tabsItem = Object.assign({\n        key: v.path\n      }, v);\n      var flag = !this.state.pane.some(function (e) {\n        return e.path === v.path;\n      });\n\n      if (flag) {\n        this.setPane(tabsItem, v.path);\n      } else {\n        this.setState({\n          activeKey: v.path\n        });\n      }\n\n      this.props.history.push(v.path);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var location = this.props.location;\n\n      var pushPane = function pushPane(v) {\n        if (v.path === location.pathname) {\n          var tabsItem = Object.assign({\n            key: v.path\n          }, v);\n\n          _this2.setPane(tabsItem, v.path);\n\n          return;\n        }\n      };\n\n      routerList.menu.forEach(function (v) {\n        if (v.children) {\n          v.children.forEach(function (e) {\n            return pushPane(e);\n          });\n        }\n\n        pushPane(v);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: 'app',\n        id: 'app',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, !getSessionStorage('token') && React.createElement(Redirect, {\n        push: true,\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: 'nav_container',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.toggleCollapsed,\n        style: {\n          marginBottom: 10,\n          backgroundColor: '#242f42',\n          border: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        style: {\n          fontSize: 20,\n          color: '#fff'\n        },\n        type: this.state.collapsed ? 'menu-unfold' : 'menu-fold',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\")), React.createElement(\"div\", {\n        className: 'message_info',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        size: 64,\n        src: \"http://blog.gdfengshuo.com/example/work/static/img/img.jpg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }))), React.createElement(\"section\", {\n        style: {\n          display: 'flex',\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: !this.state.collapsed ? {\n          width: '200px',\n          height: '100%'\n        } : {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        style: {\n          height: '100%'\n        },\n        defaultSelectedKeys: ['1'],\n        defaultOpenKeys: ['sub1'],\n        mode: \"inline\",\n        theme: \"dark\",\n        inlineCollapsed: this.state.collapsed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, routerList.menu.map(function (v) {\n        return v.children ? React.createElement(SubMenu, {\n          key: v.path,\n          title: React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            type: \"inbox\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"router_list\",\n            style: {\n              color: \"#fff\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }, v.name)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, v.children.map(function (e) {\n          return React.createElement(Menu.Item, {\n            key: e.path,\n            id: e.path,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            type: \"inbox\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"router_list\",\n            style: {\n              color: \"#fff\"\n            },\n            onClick: function onClick() {\n              return _this3.pushPath(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, e.name));\n        })) : React.createElement(Menu.Item, {\n          key: v.path,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          type: \"inbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"router_list\",\n          style: {\n            color: \"#fff\"\n          },\n          onClick: function onClick() {\n            return _this3.pushPath(v);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, v.name));\n      }))), React.createElement(\"div\", {\n        className: \"menu_right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: 'nav_tabs_container',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        hideAdd: true,\n        onChange: function onChange(e) {\n          return _this3.onChange(e);\n        },\n        activeKey: this.state.activeKey,\n        type: \"editable-card\",\n        onEdit: function onEdit(targetKey, action) {\n          return _this3.onEdit(targetKey, action);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, this.state.pane.map(function (pane) {\n        return React.createElement(Tabs.TabPane, {\n          tab: pane.name,\n          key: pane.key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, pane.content);\n      }))), React.createElement(RouterChild, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(activeKey) {\n      this.setState({\n        activeKey: activeKey\n      });\n      var pane = this.state.pane.filter(function (v) {\n        return activeKey === v.key;\n      });\n      this.pushPath(pane[0]);\n    }\n  }, {\n    key: \"onEdit\",\n    value: function onEdit(targetKey) {\n      var _this4 = this;\n\n      var activeKey = this.state.activeKey;\n      var lastIndex = 0;\n      this.state.pane.forEach(function (pane, i) {\n        if (pane.key === targetKey) {\n          lastIndex = i - 1;\n\n          if (!i && _this4.state.pane.length) {\n            _this4.onChange(_this4.state.pane[i + 1].key);\n          }\n        }\n      });\n      var pane = this.state.pane.filter(function (pane) {\n        return pane.key !== targetKey;\n      });\n\n      if (lastIndex >= 0 && activeKey === targetKey && pane.length) {\n        activeKey = pane[lastIndex].key;\n        this.onChange(activeKey);\n      }\n\n      this.setState({\n        pane: pane,\n        activeKey: activeKey\n      });\n    }\n  }]);\n\n  return Router;\n}(Component);\n\nexport default Router;","map":{"version":3,"sources":["/Users/chenyao/Documents/item/test/react-admin/src/pages/home.js"],"names":["React","Component","Menu","Icon","Button","Avatar","Tabs","RouterChild","routerList","getSessionStorage","Redirect","qs","SubMenu","params","parse","window","location","hash","split","Router","props","toggleCollapsed","setState","collapsed","state","activeKey","pane","index","tabsItem","push","v","path","pathname","Object","assign","key","flag","some","e","setPane","history","pushPane","menu","forEach","children","marginBottom","backgroundColor","border","fontSize","color","display","flex","width","height","map","name","pushPath","onChange","targetKey","action","onEdit","content","filter","lastIndex","i","length"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './home.css'\nimport {Menu, Icon, Button, Avatar, Tabs} from 'antd'\nimport RouterChild from \"../router/routerChild\";\nimport routerList from '../router/routerList'\nimport {getSessionStorage} from '../utils/storage'\nimport {Redirect} from 'react-router-dom';\nimport qs from 'qs'\nconst SubMenu = Menu.SubMenu\nconst params = qs.parse(window.location.hash.split('?')[1])\n\nclass Router extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            collapsed: false,\n            activeKey: '/home/order/order',\n            pane: [],\n            index: 1\n        }\n    }\n\n    componentDidUpdate() {\n        // setInterval(() => {\n        //     this.setState({\n        //         index: this.state.index ++\n        //     }, ()=> {\n        //         console.log(this.state.index)\n        //     },5000)\n        // })\n    }\n\n    setPane(tabsItem, activeKey) {\n        this.state.pane.push(tabsItem)\n        this.setState({activeKey, pane: this.state.pane})\n    }\n\n    pushPath(v) {\n        const {location} = this.props\n        if (v.path === location.pathname) return\n        let tabsItem = Object.assign({key: v.path}, v)\n        let flag = !this.state.pane.some(e => e.path === v.path)\n        if (flag) {\n            this.setPane(tabsItem, v.path)\n        } else {\n            this.setState({activeKey: v.path})\n        }\n        this.props.history.push(v.path)\n    }\n\n    toggleCollapsed = () => {\n        this.setState({\n            collapsed: !this.state.collapsed\n        })\n    }\n\n    componentDidMount() {\n        const {location} = this.props\n        const pushPane = v => {\n            if (v.path === location.pathname) {\n                let tabsItem = Object.assign({key: v.path}, v)\n                this.setPane(tabsItem, v.path)\n                return\n            }\n        }\n        routerList.menu.forEach(v => {\n            if (v.children) {\n                v.children.forEach(e => pushPane(e))\n            }\n            pushPane(v)\n        })\n    }\n\n    render() {\n        return (\n            <div className={'app'} id={'app'}>\n                {\n                    !getSessionStorage('token') && <Redirect push to='/login'></Redirect>\n                }\n                <div className={'nav_container'}>\n                    <div>\n                        <Button onClick={this.toggleCollapsed}\n                                style={{marginBottom: 10, backgroundColor: '#242f42', border: 'none'}}>\n                            <Icon style={{fontSize: 20, color: '#fff'}}\n                                  type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}/>\n                        </Button>\n                        <h1>后台管理系统</h1>\n                    </div>\n                    <div className={'message_info'}>\n                        <Avatar size={64} src=\"http://blog.gdfengshuo.com/example/work/static/img/img.jpg\"/>\n                    </div>\n                </div>\n                <section style={{display: 'flex', flex: 1}}>\n                    <div style={!this.state.collapsed ? {width: '200px', height: '100%'} : {height: '100%'}}>\n                        <Menu\n                            style={{height: '100%'}}\n                            defaultSelectedKeys={['1']}\n                            defaultOpenKeys={['sub1']}\n                            mode=\"inline\"\n                            theme=\"dark\"\n                            inlineCollapsed={this.state.collapsed}\n                        >\n                            {\n                                routerList.menu.map(v => v.children ?\n                                    <SubMenu key={v.path} title={<span><Icon type=\"inbox\"/>\n                                        <span className=\"router_list\" style={{color: \"#fff\"}}>{v.name}</span></span>}>\n                                        {\n                                            v.children.map(e =>\n                                                <Menu.Item key={e.path} id={e.path}>\n                                                    <Icon type=\"inbox\"/>\n                                                    <span className=\"router_list\" style={{color: \"#fff\"}}\n                                                          onClick={() => this.pushPath(e)}>\n                                                            {e.name}\n                                                        </span>\n                                                </Menu.Item>\n                                            )\n                                        }\n                                    </SubMenu> : <Menu.Item key={v.path}>\n                                        <Icon type=\"inbox\"/>\n                                        <span className=\"router_list\" style={{color: \"#fff\"}}\n                                              onClick={() => this.pushPath(v)}>\n                                            {v.name}\n                                        </span>\n                                    </Menu.Item>\n                                )\n                            }\n                        </Menu>\n                    </div>\n                    <div className='menu_right'>\n                        <section className={'nav_tabs_container'}>\n                            <Tabs\n                                hideAdd\n                                onChange={(e) => this.onChange(e)}\n                                activeKey={this.state.activeKey}\n                                type=\"editable-card\"\n                                onEdit={(targetKey, action) => this.onEdit(targetKey, action)}\n                            >\n                                {\n                                    this.state.pane.map(pane =>\n                                        <Tabs.TabPane tab={pane.name} key={pane.key}>{pane.content}</Tabs.TabPane>\n                                    )\n                                }\n                            </Tabs>\n                        </section>\n                        <RouterChild/>\n                    </div>\n                </section>\n            </div>\n        );\n    }\n\n    onChange(activeKey) {\n        this.setState({activeKey})\n        const pane = this.state.pane.filter(v => activeKey === v.key)\n        this.pushPath(pane[0])\n    }\n\n    onEdit(targetKey) {\n        let activeKey = this.state.activeKey\n        let lastIndex = 0\n        this.state.pane.forEach((pane, i) => {\n            if (pane.key === targetKey) {\n                lastIndex = i - 1\n                if (!i && this.state.pane.length) {\n                    this.onChange(this.state.pane[i + 1].key)\n                }\n            }\n        })\n        const pane = this.state.pane.filter(pane => pane.key !== targetKey)\n        if (lastIndex >= 0 && activeKey === targetKey && pane.length) {\n            activeKey = pane[lastIndex].key\n            this.onChange(activeKey)\n        }\n        this.setState({pane, activeKey: activeKey})\n    }\n}\n\nexport default Router;\n"]},"metadata":{},"sourceType":"module"}